// Generated by CoffeeScript 1.6.2
(function() {
  "use strict";  window.LanguageHandler = (function() {
    var language, oxid_language;

    language = null;

    oxid_language = null;

    function LanguageHandler() {
      this.getLanguages();
      this.initialize();
    }

    LanguageHandler.prototype.initialize = function() {
      var _this = this;

      $('#stock_manager_language_switcher').ddslick({
        width: '110',
        onSelected: function(data) {
          var new_language;

          new_language = data.selectedData.value;
          if (new_language !== _this.language) {
            _this.language = new_language;
            _this.setLanguageCookies();
            return window.location.href = window.location.href;
          }
        }
      });
      if ($('#oxid_language_switcher > form > select').length > 0) {
        return $('#oxid_language_switcher').ddslick({
          width: '130',
          onSelected: function(data) {
            var new_language;

            new_language = data.selectedData.value;
            if (new_language !== _this.oxid_language) {
              _this.oxid_language = new_language;
              _this.setLanguageCookies();
              return window.location.href = window.location.href;
            }
          }
        });
      }
    };

    LanguageHandler.prototype.setLanguageCookies = function() {
      $.cookie("stock_manager_language", this.language, {
        expires: 365
      });
      return $.cookie("oxid_language", this.oxid_language, {
        expires: 365
      });
    };

    LanguageHandler.prototype.getLanguages = function() {
      this.language = $('html').attr('lang');
      this.oxid_language = !$.cookie("oxid_language") ? this.language : $.cookie("oxid_language");
      return this.setLanguageCookies();
    };

    return LanguageHandler;

  })();

}).call(this);
